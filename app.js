const dict = {
  en: {
    "nav.about": "About",
    "nav.skills": "Tech Stack",
    "nav.education": "Education",
    "nav.contact": "Contact",

    "hero.pill": "Open to take a remote internship worldwide",
    "hero.titleA": "Junior",
    "hero.titleB": "Software Developer",
    "hero.subtitle": "Practical experience engineering and implementing APIs for custom widgets in Qt framework.",
    "hero.ctaPrimary": "Contact",
    "hero.ctaSecondary": "GitHub",

    "meta.lookingForK": "Looking for",
    "meta.lookingForV": "Remote C++/Qt internship",
    "meta.startK": "Start date",
    "meta.startV": "Immediate",
    "meta.typeK": "Job types",
    "meta.typeV": "Internship, Contract",
    "meta.locationK": "Location",
    "meta.locationV": "Remote (Worldwide)",

    "side.role": "C++/Qt Developer (Junior)",
    "side.noteTitle": "Focus",
    "side.noteText": "C++11/17/20 code, Qt Widgets/QML, build tooling with CMake and Git.",

    "about.title": "About",
    "about.lead": "Junior C++ developer with hands-on Qt experience building custom widgets and APIs.",
    "about.whatIDoTitle": "What I do",
    "about.item1": "Design and implement APIs for reusable UI components in Qt.",
    "about.item2": "Work with Qt Widgets, Qt Quick/QML, and modern C++.",
    "about.item3": "Build & maintain projects with CMake, collaborate via Git.",
    "about.languagesTitle": "Languages",
    "about.lang1": "English (business / technical).",
    "about.lang2": "French (communication).",
    "about.lang3": "Russian (native).",

    "skills.title": "Tech Stack",
    "skills.highlightTitle": "Strengths",
    "skills.s1": "API design for UI widgets",
    "skills.s2": "Qt Widgets & QML integration",
    "skills.s3": "Modern C++ practices",
    "skills.s4": "Build systems (CMake)",

    "edu.title": "Education",
    "edu.university": "Saint Petersburg Electrotechnical University “LETI”",
    "edu.m1.title": "MSc — Software Engineering",
    "edu.m1.dates": "Sep 2023 – May 2025",
    "edu.m1.gpa": "GPA: 4.75",
    "edu.m2.title": "MSc — Translation & Intercultural Communication",
    "edu.m2.dates": "Sep 2021 – May 2023",
    "edu.m2.gpa": "GPA: 5.0",
    "edu.b1.title": "BSc — Translation Studies",
    "edu.b1.dates": "Sep 2017 – May 2021",
    "edu.b1.gpa": "GPA: 5.0",

    "contact.title": "Contact",
    "contact.lead": "Best way to reach me: add email / LinkedIn and a short message form.",
    "contact.linksTitle": "Links",
    "contact.emailPlaceholder": "Email: valnik2710@yandex.ru",
    "contact.linkedinPlaceholder": "LinkedIn: www.linkedin.com/in/anna-nikiforova-b85400377",

    "form.name": "Name",
    "form.message": "Message",
    "form.send": "Send",
    "form.note": "Replace this demo form with real email handling if needed.",

    "footer.back": "Back to top",
  },

  ru: {
    "nav.about": "Обо мне",
    "nav.skills": "Стек",
    "nav.education": "Образование",
    "nav.contact": "Контакты",

    "hero.pill": "Открыта к удалённой стажировке по всему миру",
    "hero.titleA": "Junior",
    "hero.titleB": "разработчик ПО",
    "hero.subtitle": "Есть практический опыт проектирования и реализации API для кастомных виджетов в Qt.",
    "hero.ctaPrimary": "Связаться",
    "hero.ctaSecondary": "GitHub",

    "meta.lookingForK": "Ищу",
    "meta.lookingForV": "Удалённую стажировку C++/Qt",
    "meta.startK": "Старт",
    "meta.startV": "Сразу",
    "meta.typeK": "Формат",
    "meta.typeV": "Стажировка, контракт",
    "meta.locationK": "Локация",
    "meta.locationV": "Удалённо (весь мир)",

    "side.role": "C++/Qt разработчик (Junior)",
    "side.noteTitle": "Фокус",
    "side.noteText": "Аккуратный C++17/20, Qt Widgets/QML, сборка через CMake и работа с Git.",

    "about.title": "Обо мне",
    "about.lead": "Junior C++ разработчик с практикой в Qt: кастомные виджеты и API.",
    "about.whatIDoTitle": "Что делаю",
    "about.item1": "Проектирую и реализую API для переиспользуемых UI-компонентов в Qt.",
    "about.item2": "Работаю с Qt Widgets, Qt Quick/QML и современным C++.",
    "about.item3": "Собираю проекты на CMake и веду разработку через Git.",
    "about.languagesTitle": "Языки",
    "about.lang1": "Английский (деловой / технический).",
    "about.lang2": "Французский (общение).",
    "about.lang3": "Русский (родной).",

    "skills.title": "Технологии",
    "skills.highlightTitle": "Сильные стороны",
    "skills.s1": "Дизайн API для виджетов",
    "skills.s2": "Интеграция Qt Widgets и QML",
    "skills.s3": "Практики современного C++",
    "skills.s4": "Сборка (CMake)",

    "edu.title": "Образование",
    "edu.university": "СПбГЭТУ «ЛЭТИ»",
    "edu.m1.title": "Магистр — Разработка ПО",
    "edu.m1.dates": "Сентябрь 2023 – Май 2025",
    "edu.m1.gpa": "Средний балл: 4.75",
    "edu.m2.title": "Магистр — Перевод и межкультурное взаимодействие",
    "edu.m2.dates": "Сентябрь 2021 – Май 2023",
    "edu.m2.gpa": "Средний балл: 5.0",
    "edu.b1.title": "Бакалавр — Перевод и переводоведение",
    "edu.b1.dates": "Сентябрь 2017 – Май 2021",
    "edu.b1.gpa": "Средний балл: 5.0",

    "contact.title": "Контакты",
    "contact.lead": "Добавь email / LinkedIn и (при желании) короткую форму сообщения.",
    "contact.linksTitle": "Ссылки",
    "contact.emailPlaceholder": "Email: valnik2710@yandex.ru",
    "contact.linkedinPlaceholder": "LinkedIn: www.linkedin.com/in/anna-nikiforova-b85400377",

    "form.name": "Имя",
    "form.message": "Сообщение",
    "form.send": "Отправить",
    "form.note": "Замените демо-форму на реальную отправку писем при необходимости.",

    "footer.back": "Наверх",
  },

  fr: {
    "nav.about": "À propos",
    "nav.skills": "Stack",
    "nav.education": "Formation",
    "nav.contact": "Contact",

    "hero.pill": "Ouverte à un stage à distance dans le monde entier",
    "hero.titleA": "Junior",
    "hero.titleB": "développeuse logiciel",
    "hero.subtitle": "Expérience pratique dans la conception et l’implémentation d’API pour des widgets personnalisés avec le framework Qt.",
    "hero.ctaPrimary": "Me contacter",
    "hero.ctaSecondary": "GitHub",

    "meta.lookingForK": "Recherche",
    "meta.lookingForV": "Stage C++/Qt à distance",
    "meta.startK": "Disponibilité",
    "meta.startV": "Immédiate",
    "meta.typeK": "Types",
    "meta.typeV": "Stage, Contrat",
    "meta.locationK": "Lieu",
    "meta.locationV": "À distance (monde entier)",

    "side.role": "Développeuse C++/Qt (Junior)",
    "side.noteTitle": "Focus",
    "side.noteText": "C++17/20 propre, Qt Widgets/QML, outillage de build avec CMake et Git.",

    "about.title": "À propos",
    "about.lead": "Développeuse C++ junior avec une expérience pratique en Qt (widgets et API).",
    "about.whatIDoTitle": "Ce que je fais",
    "about.item1": "Conception et implémentation d’API pour des composants UI réutilisables sous Qt.",
    "about.item2": "Qt Widgets, Qt Quick/QML et C++ moderne.",
    "about.item3": "Build & maintenance via CMake, collaboration avec Git.",
    "about.languagesTitle": "Langues",
    "about.lang1": "Anglais (professionnel / technique).",
    "about.lang2": "Français (communication).",
    "about.lang3": "Russe (natif).",

    "skills.title": "Stack technique",
    "skills.highlightTitle": "Points forts",
    "skills.s1": "Conception d’API pour widgets",
    "skills.s2": "Intégration Qt Widgets et QML",
    "skills.s3": "Bonnes pratiques C++ moderne",
    "skills.s4": "Systèmes de build (CMake)",

    "edu.title": "Formation",
    "edu.university": "Université électrotechnique de Saint‑Pétersbourg « LETI »",
    "edu.m1.title": "Master — Génie logiciel",
    "edu.m1.dates": "Sept. 2023 – Mai 2025",
    "edu.m1.gpa": "Moyenne : 4.75",
    "edu.m2.title": "Master — Traduction & communication interculturelle",
    "edu.m2.dates": "Sept. 2021 – Mai 2023",
    "edu.m2.gpa": "Moyenne : 5.0",
    "edu.b1.title": "Licence — Études de traduction",
    "edu.b1.dates": "Sept. 2017 – Mai 2021",
    "edu.b1.gpa": "Moyenne : 5.0",

    "contact.title": "Contact",
    "contact.lead": "Ajoutez votre email / LinkedIn et, si besoin, un petit formulaire de message.",
    "contact.linksTitle": "Liens",
    "contact.emailPlaceholder": "Email : valnik2710@yandex.ru",
    "contact.linkedinPlaceholder": "LinkedIn : www.linkedin.com/in/anna-nikiforova-b85400377",

    "form.name": "Nom",
    "form.message": "Message",
    "form.send": "Envoyer",
    "form.note": "Remplacez ce formulaire de démo par un envoi d’email réel si nécessaire.",

    "footer.back": "Haut de page",
  }
};

function applyLang(lang) {
  const t = dict[lang] || dict.en;
  document.documentElement.lang = lang;

  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (t[key]) el.textContent = t[key];
  });

  document.querySelectorAll(".lang__btn").forEach((b) => {
    b.classList.toggle("is-active", b.dataset.lang === lang);
  });

  localStorage.setItem("lang", lang);
}

function detectLang() {
  const saved = localStorage.getItem("lang");
  if (saved && dict[saved]) return saved;

  const nav = (navigator.language || "en").slice(0, 2).toLowerCase();
  if (dict[nav]) return nav;
  return "en";
}

document.querySelectorAll(".lang__btn").forEach((btn) => {
  btn.addEventListener("click", () => applyLang(btn.dataset.lang));
});

document.getElementById("year").textContent = new Date().getFullYear();
applyLang(detectLang());

// Регистрация сервис-воркера
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js')
      .then(registration => {
        console.log('ServiceWorker зарегистрирован:', registration.scope);
      })
      .catch(error => {
        console.log('Ошибка регистрации ServiceWorker:', error);
      });
  });
}
